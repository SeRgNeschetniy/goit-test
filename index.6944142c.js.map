{"mappings":"uDAAAA,EAAiBC,KAAKC,MAAM,gyCCE5B,MAAMC,EAAO,CACXC,UAAWC,SAASC,cAAc,eAClCC,cAAeF,SAASC,cAAc,cAGxC,IAAIE,EAAY,GACZC,EAAY,GAMhB,SAASC,EAAeC,GACtB,OAAOH,EAAUI,SAASD,GAAM,YAAc,Q,CAGhD,MAAME,EAAc,KAClB,MAAMC,EAAiBb,KAAKC,MAAMa,aAAaC,QAAQ,cACjDC,EAAahB,KAAKC,MAAMa,aAAaC,QAAQ,UAEnDR,EAAYM,GAAkC,GAC9CL,EAAYQ,GAA0BC,EAAAlB,GAEtCG,EAAKC,UAAUe,UAAYC,GAAgB,EAGvCA,EAAiB,IACdX,EACJY,KACC,EAACV,GAAEA,EAAEW,KAAEA,EAAIC,OAAEA,EAAMC,UAAEA,EAASC,OAAEA,MAC9B,kCAA4Bd,uIAGLc,WAAgBH,yFAGVC,uDA5BbG,EA6B+BF,EA5B9CE,EAAEC,WAAWC,QAAO,wBAA0B,qFA6BSlB,EAClDC,cACWA,KAAMD,EAAeC,8BAhC9C,IAAwBe,CAiCT,IAEVG,KAAK,IAwBVxB,SAASyB,KAAKC,iBAAiB,SArBhBC,IACb,MAAMC,EAASD,EAAEC,OACjB,GAAIA,EAAOC,UAAUC,SAAS,YAAa,CACzC,MAAMxB,EAAKyB,OAAOH,EAAOI,QAAQ1B,IAC3BW,EAAOb,EAAU6B,MAAKC,GAAMA,EAAG5B,KAAOA,IAExCH,EAAUI,SAASD,IACrBW,EAAKE,WAAa,EAClBhB,EAAUgC,OAAOhC,EAAUiC,QAAQ9B,GAAK,KAExCW,EAAKE,WAAa,EAClBhB,EAAUkC,KAAK/B,IAGjBI,aAAa4B,QAAQ,QAAS1C,KAAK2C,UAAUnC,IAC7CM,aAAa4B,QAAQ,YAAa1C,KAAK2C,UAAUpC,IAEjDK,G,KAMJA","sources":["src/data/users.json","src/index.js"],"sourcesContent":["[\n  {\n    \"id\": 1,\n    \"user\": \"Elon Reeve Musk\",\n    \"tweets\": 777,\n    \"followers\": 100500,\n    \"avatar\": \"https://cdn.pixabay.com/photo/2016/11/21/12/42/beard-1845166_640.jpg\"\n  },\n  {\n    \"id\": 2,\n    \"user\": \"Elon Reeve Musk\",\n    \"tweets\": 97458,\n    \"followers\": 5987456,\n    \"avatar\": \"https://cdn.pixabay.com/photo/2016/11/18/19/07/happy-1836445__340.jpg\"\n  },\n  {\n    \"id\": 3,\n    \"user\": \"Elon Reeve Musk\",\n    \"tweets\": 158,\n    \"followers\": 65465,\n    \"avatar\": \"https://cdn.pixabay.com/photo/2017/04/01/21/06/portrait-2194457__340.jpg\"\n  },\n  {\n    \"id\": 4,\n    \"user\": \"Elon Reeve Musk\",\n    \"tweets\": 365,\n    \"followers\": 4569,\n    \"avatar\": \"https://cdn.pixabay.com/photo/2015/07/15/06/42/man-845709__340.jpg\"\n  },\n  {\n    \"id\": 5,\n    \"user\": \"Elon Reeve Musk\",\n    \"tweets\": 9448,\n    \"followers\": 21656,\n    \"avatar\": \"https://cdn.pixabay.com/photo/2016/11/29/06/46/adult-1867889__340.jpg\"\n  },\n  {\n    \"id\": 6,\n    \"user\": \"Elon Reeve Musk\",\n    \"tweets\": 877,\n    \"followers\": 165,\n    \"avatar\": \"https://cdn.pixabay.com/photo/2018/03/01/14/57/portrait-3190849__340.jpg\"\n  },\n  {\n    \"id\": 7,\n    \"user\": \"Elon Reeve Musk\",\n    \"tweets\": 1369,\n    \"followers\": 5465,\n    \"avatar\": \"https://cdn.pixabay.com/photo/2015/07/31/15/01/man-869215__340.jpg\"\n  },\n  {\n    \"id\": 8,\n    \"user\": \"Elon Reeve Musk\",\n    \"tweets\": 689,\n    \"followers\": 5646546,\n    \"avatar\": \"https://cdn.pixabay.com/photo/2015/01/07/20/53/hat-591973__340.jpg\"\n  },\n  {\n    \"id\": 9,\n    \"user\": \"Elon Reeve Musk\",\n    \"tweets\": 1,\n    \"followers\": 98,\n    \"avatar\": \"https://cdn.pixabay.com/photo/2015/01/12/10/45/man-597178__340.jpg\"\n  }\n]\n","import users from './data/users.json';\n\nconst refs = {\n  cardsList: document.querySelector('.cards-list'),\n  cardBtnFollow: document.querySelector('.card-btn'),\n};\n\nlet following = [];\nlet usersData = [];\n\nfunction followerFormat(x) {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n}\n\nfunction checkFollowing(id) {\n  return following.includes(id) ? 'following' : 'follow';\n}\n\nconst renderCards = () => {\n  const followingLocal = JSON.parse(localStorage.getItem('following'));\n  const usersLocal = JSON.parse(localStorage.getItem('users'));\n\n  following = followingLocal ? followingLocal : [];\n  usersData = usersLocal ? usersLocal : users;\n\n  refs.cardsList.innerHTML = createUserList();\n};\n\nconst createUserList = () => {\n  return usersData\n    .map(\n      ({ id, user, tweets, followers, avatar }) =>\n        `<li class=\"card\" data-id=${id} data-state=\"follow\">\n            <div class=\"card-avatar\">\n                <div class=\"card-img\">\n                    <img src=${avatar}  alt=\"${user}\" />\n                </div>\n            </div>\n            <p class=\"card-tweets\">${tweets} tweets</p>\n            <p class=\"card-followers\">${followerFormat(followers)} followers</p>\n            <button type=\"button\" class=\"card-btn\" data-state=${checkFollowing(\n              id\n            )} data-id=${id}>${checkFollowing(id)}</button>\n         </li>`\n    )\n    .join('');\n};\n\nconst follow = e => {\n  const target = e.target;\n  if (target.classList.contains('card-btn')) {\n    const id = Number(target.dataset.id);\n    const user = usersData.find(el => el.id === id);\n\n    if (following.includes(id)) {\n      user.followers -= 1;\n      following.splice(following.indexOf(id), 1);\n    } else {\n      user.followers += 1;\n      following.push(id);\n    }\n\n    localStorage.setItem('users', JSON.stringify(usersData));\n    localStorage.setItem('following', JSON.stringify(following));\n\n    renderCards();\n  }\n};\n\ndocument.body.addEventListener('click', follow);\n\nrenderCards();\n"],"names":["$bd0abc9f243a714d$exports","JSON","parse","$1f0dc3b9307be026$var$refs","cardsList","document","querySelector","cardBtnFollow","$1f0dc3b9307be026$var$following","$1f0dc3b9307be026$var$usersData","$1f0dc3b9307be026$var$checkFollowing","id","includes","$1f0dc3b9307be026$var$renderCards","followingLocal","localStorage","getItem","usersLocal","$parcel$interopDefault","innerHTML","$1f0dc3b9307be026$var$createUserList","map","user","tweets","followers","avatar","x","toString","replace","join","body","addEventListener","e","target","classList","contains","Number","dataset","find","el","splice","indexOf","push","setItem","stringify"],"version":3,"file":"index.6944142c.js.map"}